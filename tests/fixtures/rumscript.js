"use strict";(()=>{var p={DEBUG_FLAG:"upassist_rum_debug",TRACKING_ENABLED:"upassist_rum_enable",TRACKING_DISABLED:"upassist_rum_disable",SESSION_COOKIE:"_up_session_id"};var x=e=>window&&window.location.search.indexOf(e)>-1,z=()=>{let e=x(p.TRACKING_ENABLED),t=x(p.TRACKING_DISABLED);if(e||t){if(!window.localStorage){a("Can't disable Upassist RUM. This browser does not support local storage.",void 0,!0);return}e&&(window.localStorage.removeItem(p.TRACKING_DISABLED),a("Upassist RUM has been enabled on this device.",void 0,!0)),t&&(window.localStorage.setItem(p.TRACKING_DISABLED,"true"),a("Upassist RUM has been disabled on this device.",void 0,!0))}},H=()=>{if(window.history.pushState&&!window.upassist._historyPatched){a("Single page app mode is set to 'history', patching History API");let e=window.history.pushState,t=()=>h("Pageview");window.history.pushState=function(){e.apply(this,arguments),t()},window.addEventListener("popstate",t),window.upassist._historyPatched=!0,a("Listening for History API changes")}},a=(e,t,n)=>{let r=s.debug||x(p.DEBUG_FLAG);if(!n&&!r)return;let o=`[Upassist RUM] ${e}`;t?console.log(o,t):console.log(o)};var s={ingestionHost:"https://rum.upassist.cloud/api",honorDNT:!1,filterLocalhost:!1,debug:!1,trackMode:"history",enabled:!0,autoTrackErrors:!0,autoTrackCoreWebVitals:!0},q=e=>(s={...s,...e},a("Updated configuration",s),s);var Z=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),J=e=>encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent),k=decodeURIComponent,M=e=>(e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent));function Ee(e){return e=Object.assign({},e),typeof e.expires=="number"&&(e.expires=new Date(Date.now()+e.expires*864e5)),e.expires!=null&&(e.expires=e.expires.toUTCString()),Object.entries(e).filter(([t,n])=>n!=null&&n!==!1).map(([t,n])=>n===!0?`; ${t}`:`; ${t}=${n.split(";")[0]}`).join("")}function X(e,t,n){let r=/(?:^|; )([^=]*)=([^;]*)/g,o={},i;for(;(i=r.exec(document.cookie))!=null;)try{let c=n(i[1]);if(o[c]=t(i[2],c),e===c)break}catch{}return e!=null?o[e]:o}var Q=Object.freeze({decodeName:k,decodeValue:M,encodeName:Z,encodeValue:J}),P=Object.freeze({path:"/"});function E(e,t,n=P,{encodeValue:r=J,encodeName:o=Z}={}){return document.cookie=`${o(e)}=${r(t,e)}${Ee(n)}`}function A(e,{decodeValue:t=M,decodeName:n=k}={}){return X(e,t,n)}function Te({decodeValue:e=M,decodeName:t=k}={}){return X(void 0,e,t)}function Ce(e,t=P){E(e,"",Object.assign({},t,{expires:-1}))}function I(e,t){let n={set:function(o,i,c){return E(o,i,Object.assign({},this.attributes,c),{encodeValue:this.converter.write})},get:function(o){if(arguments.length===0)return Te(this.converter.read);if(o!=null)return A(o,this.converter.read)},remove:function(o,i){Ce(o,Object.assign({},this.attributes,i))},withAttributes:function(o){return I(this.converter,Object.assign({},this.attributes,o))},withConverter:function(o){return I(Object.assign({},this.converter,o),this.attributes)}},r={attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}};return Object.create(n,r)}var nt=I({read:Q.decodeValue,write:Q.encodeValue},P);var l=[];for(T=0;T<256;++T)l.push((T+256).toString(16).slice(1));var T;function Y(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}var C,Se=new Uint8Array(16);function D(){if(!C&&(C=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!C))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return C(Se)}var Le=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),O={randomUUID:Le};function Re(e,t,n){if(O.randomUUID&&!t&&!e)return O.randomUUID();e=e||{};var r=e.random||(e.rng||D)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return Y(r)}var F=Re;function ee(e,t){return{client_key:s.clientKey,environment:s.environment,event_name:e,user_agent:Ie(),url:xe(),referrer:De(),language:Me(),connection_type:Ae(),screen_width:Oe(),timezone:Pe(),session_id:Ne(),...ke(),...Be(e),...t||{}}}var xe=()=>{let e=s.includeURLFragment?window.location.hash:"",t=[];if(s.includeURLQueryParams&&s.includeURLQueryParams.length>0){let r=new URLSearchParams(window.location.search);for(let o of s.includeURLQueryParams)if(r.has(o)){let i=r.get(o);i?t.push(`${o}=${i}`):t.push(`${o}`)}}let n="";return t&&t.length>0&&(n=`?${t.join("&")}`),window.location.protocol+"//"+window.location.hostname+window.location.pathname+n+e},Ie=()=>window.navigator.userAgent,y=e=>{let t=window.location.search.match(e);return t?t[2]:void 0},ke=()=>({utm_source:y(/[?&](ref|source|utm_source)=([^?&]+)/),utm_campaign:y(/[?&](utm_campaign)=([^?&]+)/),utm_medium:y(/[?&](utm_medium)=([^?&]+)/),utm_content:y(/[?&](utm_content)=([^?&]+)/),utm_term:y(/[?&](utm_term)=([^?&]+)/)}),Me=()=>{let e=window.navigator;return e?e.userLanguage||e.language:void 0},Pe=()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}},Ae=()=>navigator.connection&&"effectiveType"in navigator.connection?navigator.connection.effectiveType:void 0,De=()=>{let e=document.referrer;if(e){let t=new URL(e);return t.hostname.toLowerCase()===window.location.hostname.toLowerCase()?void 0:t.protocol+"//"+t.hostname+t.pathname}},Oe=()=>window?.innerWidth,Fe=e=>{try{if(e){let t=Math.ceil(e);return isNaN(t)||t<0?void 0:t}else return}catch{return}},Ne=()=>{let e=A(p.SESSION_COOKIE);if(!e){a("Session is not found, creating new one");let t=new Date;t.setMinutes(t.getMinutes()+30);let n=F();return E(p.SESSION_COOKIE,n,{expires:t}),n}return e},Be=e=>{let t={};if(e!=="Pageview"||window.upassist._initialPageLoadSent)return t;try{let n=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||{};if(n.getEntriesByType){let r=n.getEntriesByType("navigation")[0];r&&(t={page_load_dns:r.domainLookupEnd-r.domainLookupStart,page_load_connect:r.connectEnd-r.connectStart,page_load_ssl:r.secureConnectionStart?r.requestStart-r.secureConnectionStart:void 0,page_load_ttfb:r.responseStart-r.requestStart,page_load_download:r.responseEnd-r.responseStart,page_load_dom_content_loaded:r.domContentLoadedEventEnd-r.responseEnd,page_load_render:r.domComplete-r.domContentLoadedEventEnd,page_load_total:r.loadEventStart,page_load_transfer_size:r.transferSize})}}catch(n){a("Error while loading performance metrics",n)}for(let n of Object.keys(t))t[n]=Fe(t[n]);return window.upassist._initialPageLoadSent=!0,t};var te=async(e,t)=>{let n=ee(e,t),r=je(n);r&&Ge(r)&&await Ve(r)},Ve=async e=>{let t=`${s.ingestionHost}/sites/events`,n=JSON.stringify(e);navigator.sendBeacon?navigator.sendBeacon.call(navigator,t,n):await fetch(t,{body:n,method:"POST",credentials:"omit",keepalive:!0}),a("Sent events",e)},Ge=e=>{if(!s.clientKey)return a("Bad configuration: missing clientKey",void 0,!0),!1;if(!e.event_name||!/^[a-zA-Z][a-zA-Z0-9\_\-\.]{0,63}$/.test(e.event_name)){a("Invalid event name.",void 0,!0);return}if(window.localStorage&&window.localStorage.getItem(p.TRACKING_DISABLED)||!s.enabled)return a("Skipping event collection, Upassist RUM has been manually disabled on this browser.",void 0,!0),!1;if(!s.debug){if(s.honorDNT&&"doNotTrack"in window.navigator&&window.navigator.doNotTrack==="1")return a("Honoring 'Do Not Track'",void 0,!0),!1;if(s.filterLocalhost&&/^localhost$|^127(?:\.[0-9]+){0,2}\.[0-9]+$|^(?:0*\:)*?:?0*1$/.test(window.location.hostname))return a("Skipping event collection, localhost filter enabled",void 0,!0),!1;if(window.location.protocol==="file:")return a("Can't track from file URLs",void 0,!0),!1;if(window.document.visibilityState==="prerender")return a("Skipping event collection, document is pre-rendering",void 0,!0),!1;if(window.navigator.webdriver)return a("Skipping event collection, navigation is automated",void 0,!0),!1}if(e.event_name==="Pageview"){let t=window.upassist._previousPath,n=e.url;if(window.upassist._previousPath=n,t&&t===n){a("Skipping event collection, duplicate pageview detected");return}}return!0},je=e=>{let t=e;if(s.beforeSend){let n;try{n=s.beforeSend({...e})}catch(r){console.error(r)}if(!n){a("beforeSend hook returned null or undefined, skipping event collection");return}n.client_key=e.client_key;for(let r of Object.keys(e))t[r]=n[r]}return t};function ne(e,t){let n=!1;return(...r)=>{n||(n=!0,setTimeout(()=>{e(...r),n=!1},t))}}var m,b,de,S;var le=-1,U=function(e){addEventListener("pageshow",function(t){t.persisted&&(le=t.timeStamp,e(t))},!0)},fe=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},B=function(){var e=fe();return e&&e.activationStart||0},g=function(e,t){var n=fe(),r="navigate";return le>=0?r="back-forward-cache":n&&(document.prerendering||B()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},R=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver(function(o){Promise.resolve().then(function(){t(o.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},v=function(e,t,n,r){var o,i;return function(c){t.value>=0&&(c||r)&&((i=t.value-(o||0))||o===void 0)&&(o=t.value,t.delta=i,t.rating=function(d,u){return d>u[1]?"poor":d>u[0]?"needs-improvement":"good"}(t.value,n),e(t))}},V=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},G=function(e){var t=function(n){n.type!=="pagehide"&&document.visibilityState!=="hidden"||e(n)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},j=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},w=-1,re=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},L=function(e){document.visibilityState==="hidden"&&w>-1&&(w=e.type==="visibilitychange"?e.timeStamp:0,Ke())},oe=function(){addEventListener("visibilitychange",L,!0),addEventListener("prerenderingchange",L,!0)},Ke=function(){removeEventListener("visibilitychange",L,!0),removeEventListener("prerenderingchange",L,!0)},K=function(){return w<0&&(w=re(),oe(),U(function(){setTimeout(function(){w=re(),oe()},0)})),{get firstHiddenTime(){return w}}},$=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},ie=[1800,3e3],$e=function(e,t){t=t||{},$(function(){var n,r=K(),o=g("FCP"),i=R("paint",function(c){c.forEach(function(d){d.name==="first-contentful-paint"&&(i.disconnect(),d.startTime<r.firstHiddenTime&&(o.value=Math.max(d.startTime-B(),0),o.entries.push(d),n(!0)))})});i&&(n=v(e,o,ie,t.reportAllChanges),U(function(c){o=g("FCP"),n=v(e,o,ie,t.reportAllChanges),V(function(){o.value=performance.now()-c.timeStamp,n(!0)})}))})},ae=[.1,.25],pe=function(e,t){t=t||{},$e(j(function(){var n,r=g("CLS",0),o=0,i=[],c=function(u){u.forEach(function(f){if(!f.hadRecentInput){var be=i[0],Ue=i[i.length-1];o&&f.startTime-Ue.startTime<1e3&&f.startTime-be.startTime<5e3?(o+=f.value,i.push(f)):(o=f.value,i=[f])}}),o>r.value&&(r.value=o,r.entries=i,n())},d=R("layout-shift",c);d&&(n=v(e,r,ae,t.reportAllChanges),G(function(){c(d.takeRecords()),n(!0)}),U(function(){o=0,r=g("CLS",0),n=v(e,r,ae,t.reportAllChanges),V(function(){return n()})}),setTimeout(n,0))}))},_={passive:!0,capture:!0},We=new Date,se=function(e,t){m||(m=t,b=e,de=new Date,ge(removeEventListener),me())},me=function(){if(b>=0&&b<de-We){var e={entryType:"first-input",name:m.type,target:m.target,cancelable:m.cancelable,startTime:m.timeStamp,processingStart:m.timeStamp+b};S.forEach(function(t){t(e)}),S=[]}},ze=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(n,r){var o=function(){se(n,r),c()},i=function(){c()},c=function(){removeEventListener("pointerup",o,_),removeEventListener("pointercancel",i,_)};addEventListener("pointerup",o,_),addEventListener("pointercancel",i,_)}(t,e):se(t,e)}},ge=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,ze,_)})},ce=[100,300],ve=function(e,t){t=t||{},$(function(){var n,r=K(),o=g("FID"),i=function(u){u.startTime<r.firstHiddenTime&&(o.value=u.processingStart-u.startTime,o.entries.push(u),n(!0))},c=function(u){u.forEach(i)},d=R("first-input",c);n=v(e,o,ce,t.reportAllChanges),d&&G(j(function(){c(d.takeRecords()),d.disconnect()})),d&&U(function(){var u;o=g("FID"),n=v(e,o,ce,t.reportAllChanges),S=[],b=-1,m=null,ge(addEventListener),u=i,S.push(u),me()})})};var Ct=1/0;var ue=[2500,4e3],N={},he=function(e,t){t=t||{},$(function(){var n,r=K(),o=g("LCP"),i=function(u){var f=u[u.length-1];f&&f.startTime<r.firstHiddenTime&&(o.value=Math.max(f.startTime-B(),0),o.entries=[f],n())},c=R("largest-contentful-paint",i);if(c){n=v(e,o,ue,t.reportAllChanges);var d=j(function(){N[o.id]||(i(c.takeRecords()),c.disconnect(),N[o.id]=!0,n(!0))});["keydown","click"].forEach(function(u){addEventListener(u,function(){return setTimeout(d,0)},!0)}),G(d),U(function(u){o=g("LCP"),n=v(e,o,ue,t.reportAllChanges),V(function(){o.value=performance.now()-u.timeStamp,N[o.id]=!0,n(!0)})})}})};function we(){window?.upassist?._listeningForErrors||(window.addEventListener("error",W),window.upassist._listeningForErrors=!0,a("Listening for errors"))}function ye(){if(window?.upassist?._listeningForCoreWebVitals)return;let e=(t,n)=>r=>{h(t,{[n]:r.value})};pe(e("WebVital","web_vital_cls")),ve(e("WebVital","web_vital_fid")),he(e("WebVital","web_vital_lcp")),window.upassist._listeningForCoreWebVitals=!0,a("Listening for Core Web Vitals")}var He=(e,t,n={})=>{switch(e){case"config":if(!t)return a("Passed empty config params");qe(t);break;case"track":h(t,n);break;case"captureError":W(t,n);break;default:a("Unknown command",e,!0);return}},W=ne((e,t={})=>{h("Error",{error_type:e.error?.name||"Error",message:e.error?.message||e.message,lineno:e.lineno,colno:e.colno,filename:e.filename,...t})},1e3),h=(e,t={})=>{let n=()=>te(e,t);document.readyState==="complete"?setTimeout(n,0):(a("Document not ready, adding event listener"),window.addEventListener("load",()=>{setTimeout(n,0)}))},qe=e=>{let t={...s},n=q(e);s.trackMode&&["pageload","history"].indexOf(s.trackMode)>-1&&(s.trackMode==="history"&&H(),!t.clientKey&&n.clientKey&&(a("Triggering initial pageview"),h("Pageview"))),a(`Tracking mode: ${s.trackMode}`)};var _e=()=>{z();let e=window.upassist&&window.upassist.q||[];window.upassist=He,window.upassist.q=e;for(let t of e)window.upassist.apply(void 0,t);s.autoTrackErrors&&we(),s.autoTrackCoreWebVitals&&ye()};_e();})();
/*! Bundled license information:

typescript-cookie/dist/typescript-cookie.mjs:
  (*! typescript-cookie v1.0.6 | MIT *)
*/
